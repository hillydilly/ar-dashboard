<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>A&R Scouting Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    :root{--bg-1:#fafafa;--bg-2:#fff;--bg-3:#f4f4f5;--bg-h:#e4e4e7;--tx-1:#18181b;--tx-2:#52525b;--tx-3:#a1a1aa;--bd:#e4e4e7;--bd-l:#f4f4f5;--acc:#2563eb;--acc-l:#dbeafe;--grn:#10b981;--grn-l:#d1fae5;--red:#ef4444;--red-l:#fee2e2;--prp:#8b5cf6;--prp-l:#ede9fe;--org:#f59e0b;--org-l:#fef3c7}
    [data-theme="dark"]{--bg-1:#09090b;--bg-2:#18181b;--bg-3:#27272a;--bg-h:#3f3f46;--tx-1:#fafafa;--tx-2:#a1a1aa;--tx-3:#71717a;--bd:#27272a;--bd-l:#3f3f46;--acc:#3b82f6;--acc-l:rgba(59,130,246,.15);--grn:#10b981;--grn-l:rgba(16,185,129,.15);--red:#ef4444;--red-l:rgba(239,68,68,.15);--prp:#a78bfa;--prp-l:rgba(139,92,246,.15);--org:#fbbf24;--org-l:rgba(251,191,36,.15)}
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Plus Jakarta Sans',-apple-system,sans-serif;background:var(--bg-1);color:var(--tx-1);min-height:100vh;transition:background .3s,color .3s}
    input,button,select{font-family:inherit}input:focus{outline:none;border-color:var(--acc)!important}
    ::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--bd);border-radius:3px}
    .ld{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;gap:16px}
    .sp{width:36px;height:36px;border:3px solid var(--bd);border-top-color:var(--acc);border-radius:50%;animation:spin .8s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    @keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}.fi{animation:fadeIn .4s ease-out forwards}
    .mono{font-family:'JetBrains Mono',monospace}
    .clickable{cursor:pointer;transition:transform .1s,box-shadow .2s}.clickable:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}
  </style>
</head>
<body>
<div id="root"><div class="ld"><div class="sp"></div><span style="color:var(--tx-3);font-size:14px">Loading...</span></div></div>
<script>
const FIREBASE_CONFIG={apiKey:"AIzaSyAI2Nrt4PsnOB0DyLa4yrWYyY39Oblzcec",authDomain:"ar-scouting-dashboard.firebaseapp.com",projectId:"ar-scouting-dashboard",storageBucket:"ar-scouting-dashboard.firebasestorage.app",messagingSenderId:"290834477922",appId:"1:290834477922:web:979499b51ba18607f0f23b"};
let db=null;
function initFirebase(){try{firebase.initializeApp(FIREBASE_CONFIG);db=firebase.firestore();return true}catch(e){console.error(e);return false}}
const FS={
  async load(){if(!db)return[];try{const s=await db.collection('artists').get();return s.docs.map(d=>({id:d.id,...d.data()}))}catch(e){console.error(e);return[]}},
  async save(a){if(!db)return false;try{const{id,...data}=a;await db.collection('artists').doc(id).set(data,{merge:true});return true}catch(e){console.error(e);return false}},
  async del(id){if(!db)return false;try{await db.collection('artists').doc(id).delete();return true}catch(e){console.error(e);return false}},
  sub(cb){if(!db)return()=>{};return db.collection('artists').onSnapshot(s=>{cb(s.docs.map(d=>({id:d.id,...d.data()})))},e=>console.error(e))}
};
window.FS=FS;
</script>
<script type="text/babel">
const{useState,useEffect,useMemo}=React;

// Utilities
const fmt=n=>{if(!n||n===0)return'0';if(n>=1e9)return(n/1e9).toFixed(1)+'B';if(n>=1e6)return(n/1e6).toFixed(1)+'M';if(n>=1e3)return(n/1e3).toFixed(1)+'K';return n.toLocaleString()};
const fmtD=n=>{if(!n||n===0)return'0';const a=Math.abs(n),p=n>=0?'+':'-';if(a>=1e6)return p+(a/1e6).toFixed(1)+'M';if(a>=1e3)return p+(a/1e3).toFixed(1)+'K';return p+a.toLocaleString()};
const vel=(h,d=1)=>{if(!h||h.length<2)return 0;return(h[h.length-1]?.v||0)-(h[Math.max(0,h.length-1-d)]?.v||0)};

// Calculate totals - streams from Spotify + Apple Music + YouTube (excluding YT uploads)
const totStr=a=>{
  if(!a.sm)return 0;
  return Object.entries(a.sm).reduce((sum,[id,m])=>{
    const song=a.sg?.find(s=>s.id===id);
    // Don't count YouTube uploads as streams
    if(song?.isYTUpload)return sum;
    return sum+(m.st||0)+(m.am||0);
  },0);
};
const totUGC=a=>a.sm?Object.values(a.sm).reduce((s,x)=>s+(x.ug||0),0):0;
const dayStr=a=>{
  if(!a.sm)return 0;
  return Object.entries(a.sm).reduce((sum,[id,m])=>{
    const song=a.sg?.find(s=>s.id===id);
    if(song?.isYTUpload)return sum;
    return sum+vel(m.h?.st,1)+vel(m.h?.am,1);
  },0);
};
const weekStr=a=>{
  if(!a.sm)return 0;
  return Object.entries(a.sm).reduce((sum,[id,m])=>{
    const song=a.sg?.find(s=>s.id===id);
    if(song?.isYTUpload)return sum;
    return sum+vel(m.h?.st,7)+vel(m.h?.am,7);
  },0);
};
const monthStr=a=>{
  if(!a.sm)return 0;
  return Object.entries(a.sm).reduce((sum,[id,m])=>{
    const song=a.sg?.find(s=>s.id===id);
    if(song?.isYTUpload)return sum;
    return sum+vel(m.h?.st,30)+vel(m.h?.am,30);
  },0);
};
const dayUGC=a=>a.sm?Object.values(a.sm).reduce((s,x)=>s+vel(x.h?.ug,1),0):0;

// Icons
const I={
  sun:<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>,
  moon:<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>,
  plus:<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>,
  search:<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>,
  up:<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="18 15 12 9 6 15"/></svg>,
  down:<svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><polyline points="6 9 12 15 18 9"/></svg>,
  ext:<svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>,
  chev:<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="9 18 15 12 9 6"/></svg>,
  back:<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>,
  trash:<svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
  edit:<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>,
  x:<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>,
  fire:<svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor"><path d="M12 23c-4.97 0-9-3.58-9-8 0-3.31 2.69-6.14 5-8 0 2.76 2.24 5 5 5s4-1.34 4-3c1.5 1.5 3 4 3 6 0 4.42-4.03 8-8 8z"/></svg>,
  info:<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>,
  sp:<svg width="15" height="15" viewBox="0 0 24 24" fill="#1DB954"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02z"/></svg>,
  tk:<svg width="15" height="15" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64V9.4A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4z"/></svg>,
  ig:<svg width="15" height="15" viewBox="0 0 24 24" fill="#E1306C"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0z"/></svg>,
  yt:<svg width="15" height="15" viewBox="0 0 24 24" fill="#FF0000"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814z"/></svg>,
  am:<svg width="15" height="15" viewBox="0 0 24 24" fill="#FA243C"><path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm4.586 14.424c-.18.295-.563.387-.857.207-2.35-1.434-5.305-1.76-8.786-.963-.335.077-.67-.133-.746-.47-.077-.334.132-.67.47-.745 3.808-.87 7.076-.496 9.712 1.115.293.18.386.563.206.856z"/></svg>,
};

// Components
const Spark=({data,h=26})=>{
  if(!data||data.length<2)return<div style={{width:70,height:h}}/>;
  const vs=data.map(d=>d.v||0),mn=Math.min(...vs),mx=Math.max(...vs),rg=mx-mn||1,w=70;
  const pts=vs.map((v,i)=>`${(i/(vs.length-1))*w},${h-((v-mn)/rg)*(h-4)-2}`).join(' ');
  const up=vs[vs.length-1]>=vs[0];
  const c=up?'var(--grn)':'var(--red)';
  return<svg width={w} height={h}><polygon points={`0,${h} ${pts} ${w},${h}`} fill={c} fillOpacity=".12"/><polyline points={pts} fill="none" stroke={c} strokeWidth="2" strokeLinecap="round"/></svg>;
};

const Delta=({v,sz='md'})=>{
  const pos=v>=0,zero=v===0;
  const s={sm:{fs:11,p:'2px 6px'},md:{fs:12,p:'3px 8px'}}[sz];
  return<span className="mono" style={{display:'inline-flex',alignItems:'center',gap:2,padding:s.p,borderRadius:6,fontSize:s.fs,fontWeight:600,background:zero?'var(--bg-3)':pos?'var(--grn-l)':'var(--red-l)',color:zero?'var(--tx-3)':pos?'var(--grn)':'var(--red)'}}>{!zero&&(pos?I.up:I.down)}{fmtD(v)}</span>;
};

const PBadge=({p,url})=>{
  if(!url)return null;
  const icons={sp:I.sp,tk:I.tk,ig:I.ig,yt:I.yt,am:I.am};
  const labels={sp:'Spotify',tk:'TikTok',ig:'Instagram',yt:'YouTube',am:'Apple Music'};
  return<a href={url} target="_blank" rel="noopener" style={{display:'inline-flex',alignItems:'center',gap:5,padding:'5px 9px',borderRadius:7,background:'var(--bg-3)',color:'var(--tx-2)',fontSize:11,fontWeight:500,textDecoration:'none',transition:'background .15s'}} onMouseOver={e=>e.currentTarget.style.background='var(--bg-h)'} onMouseOut={e=>e.currentTarget.style.background='var(--bg-3)'}>{icons[p]}{labels[p]}{I.ext}</a>;
};

// Clickable Stat Card with tooltip
const Stat=({label,value,delta,icon,color,spark,tooltip,onClick})=>(
  <div className={onClick?"clickable":""} onClick={onClick} style={{padding:14,borderRadius:12,background:'var(--bg-2)',border:'1px solid var(--bd)',position:'relative'}} title={tooltip}>
    <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:6}}>
      <span style={{fontSize:10,fontWeight:600,color:'var(--tx-3)',textTransform:'uppercase',letterSpacing:'.5px'}}>{label}</span>
      <div style={{display:'flex',alignItems:'center',gap:4}}>
        {icon&&<span style={{color}}>{icon}</span>}
        {onClick&&<span style={{color:'var(--tx-3)',fontSize:10}}>â“˜</span>}
      </div>
    </div>
    <div className="mono" style={{fontSize:24,fontWeight:700,color,marginBottom:6}}>{value}</div>
    <div style={{display:'flex',alignItems:'center',justifyContent:'space-between'}}>
      {delta!==undefined&&<Delta v={delta} sz="sm"/>}
      {spark&&<Spark data={spark} h={20}/>}
    </div>
  </div>
);

// Stats Detail Modal - shows all-time, monthly, weekly, daily
function StatsModal({title,artists,type,onClose}){
  const data=useMemo(()=>{
    if(type==='streams'){
      const allTime=artists.reduce((s,a)=>s+totStr(a),0);
      const monthly=artists.reduce((s,a)=>s+monthStr(a),0);
      const weekly=artists.reduce((s,a)=>s+weekStr(a),0);
      const daily=artists.reduce((s,a)=>s+dayStr(a),0);
      return{allTime,monthly,weekly,daily,desc:'Combined streams from Spotify, Apple Music, and YouTube (excluding YouTube uploads)'};
    }
    if(type==='monthly'){
      const allTime=artists.reduce((s,a)=>s+(a.m?.ml||0),0);
      return{allTime,monthly:0,weekly:0,daily:0,desc:'Monthly listeners from Spotify (refreshed monthly)'};
    }
    if(type==='tiktok'){
      const allTime=artists.reduce((s,a)=>s+(a.m?.tk||0),0);
      const daily=artists.reduce((s,a)=>s+vel(a.h?.tk,1),0);
      const weekly=artists.reduce((s,a)=>s+vel(a.h?.tk,7),0);
      return{allTime,monthly:0,weekly,daily,desc:'Total TikTok followers across all artists'};
    }
    if(type==='instagram'){
      const allTime=artists.reduce((s,a)=>s+(a.m?.ig||0),0);
      const daily=artists.reduce((s,a)=>s+vel(a.h?.ig,1),0);
      const weekly=artists.reduce((s,a)=>s+vel(a.h?.ig,7),0);
      return{allTime,monthly:0,weekly,daily,desc:'Total Instagram followers across all artists'};
    }
    if(type==='ugc'){
      const allTime=artists.reduce((s,a)=>s+totUGC(a),0);
      const daily=artists.reduce((s,a)=>s+dayUGC(a),0);
      return{allTime,monthly:0,weekly:0,daily,desc:'Total TikTok videos using artist sounds (UGC = User Generated Content)'};
    }
    if(type==='social'){
      const avg=artists.length?(artists.reduce((s,a)=>s+(parseFloat(a.m?.ss)||0),0)/artists.length).toFixed(1):0;
      return{allTime:avg,monthly:0,weekly:0,daily:0,desc:'Social Score based on TikTok and Instagram posting consistency (0-10 scale)'};
    }
    return{allTime:0,monthly:0,weekly:0,daily:0,desc:''};
  },[artists,type]);

  return(
    <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,.55)',backdropFilter:'blur(4px)',display:'flex',alignItems:'center',justifyContent:'center',padding:16,zIndex:1000}} onClick={onClose}>
      <div style={{width:'100%',maxWidth:500,background:'var(--bg-2)',borderRadius:14,border:'1px solid var(--bd)',overflow:'hidden'}} onClick={e=>e.stopPropagation()}>
        <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'14px 18px',borderBottom:'1px solid var(--bd)'}}>
          <h2 style={{fontSize:16,fontWeight:600}}>{title} Details</h2>
          <button onClick={onClose} style={{padding:6,borderRadius:6,border:'none',background:'var(--bg-3)',color:'var(--tx-3)',cursor:'pointer'}}>{I.x}</button>
        </div>
        <div style={{padding:18}}>
          <p style={{fontSize:12,color:'var(--tx-3)',marginBottom:16,lineHeight:1.5}}>{data.desc}</p>
          <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:12}}>
            <div style={{padding:14,borderRadius:10,background:'var(--bg-3)'}}>
              <div style={{fontSize:10,color:'var(--tx-3)',textTransform:'uppercase',marginBottom:4}}>All Time</div>
              <div className="mono" style={{fontSize:22,fontWeight:700}}>{type==='social'?data.allTime:fmt(data.allTime)}</div>
            </div>
            {data.monthly!==0&&<div style={{padding:14,borderRadius:10,background:'var(--bg-3)'}}>
              <div style={{fontSize:10,color:'var(--tx-3)',textTransform:'uppercase',marginBottom:4}}>This Month</div>
              <div className="mono" style={{fontSize:22,fontWeight:700,color:'var(--grn)'}}>{fmtD(data.monthly)}</div>
            </div>}
            {data.weekly!==0&&<div style={{padding:14,borderRadius:10,background:'var(--bg-3)'}}>
              <div style={{fontSize:10,color:'var(--tx-3)',textTransform:'uppercase',marginBottom:4}}>This Week</div>
              <div className="mono" style={{fontSize:22,fontWeight:700,color:'var(--grn)'}}>{fmtD(data.weekly)}</div>
            </div>}
            {data.daily!==0&&<div style={{padding:14,borderRadius:10,background:'var(--bg-3)'}}>
              <div style={{fontSize:10,color:'var(--tx-3)',textTransform:'uppercase',marginBottom:4}}>Today</div>
              <div className="mono" style={{fontSize:22,fontWeight:700,color:'var(--grn)'}}>{fmtD(data.daily)}</div>
            </div>}
          </div>
        </div>
      </div>
    </div>
  );
}

// Main App
function App(){
  const[artists,setArtists]=useState([]);
  const[loading,setLoading]=useState(true);
  const[sel,setSel]=useState(null);
  const[showAdd,setShowAdd]=useState(false);
  const[search,setSearch]=useState('');
  const[theme,setTheme]=useState(()=>localStorage.getItem('ar-theme')||'dark');
  const[statsModal,setStatsModal]=useState(null);

  useEffect(()=>{initFirebase();const unsub=FS.sub(d=>{setArtists(d);setLoading(false)});return()=>unsub()},[]);
  useEffect(()=>{document.documentElement.setAttribute('data-theme',theme);localStorage.setItem('ar-theme',theme)},[theme]);

  const toggle=()=>setTheme(t=>t==='dark'?'light':'dark');
  const save=async a=>await FS.save(a);
  const add=async d=>{const n={...d,id:Date.now().toString(),sg:[],sm:{},h:{sf:[],tk:[],ig:[],yt:[]}};await save(n);setShowAdd(false)};
  const del=async id=>{if(confirm('Remove this artist?')){await FS.del(id);if(sel?.id===id)setSel(null)}};

  const filtered=useMemo(()=>{if(!search)return artists;const q=search.toLowerCase();return artists.filter(a=>a.n?.toLowerCase().includes(q))},[artists,search]);
  const sorted=useMemo(()=>[...filtered].sort((a,b)=>totStr(b)-totStr(a)),[filtered]);

  if(loading)return<div className="ld"><div className="sp"></div><span style={{color:'var(--tx-3)',fontSize:14}}>Loading...</span></div>;

  return(
    <div style={{minHeight:'100vh'}}>
      {/* Header */}
      <header style={{position:'sticky',top:0,zIndex:100,background:'var(--bg-2)',borderBottom:'1px solid var(--bd)',padding:'10px 20px'}}>
        <div style={{maxWidth:1400,margin:'0 auto',display:'flex',alignItems:'center',justifyContent:'space-between',gap:12,flexWrap:'wrap'}}>
          <div style={{display:'flex',alignItems:'center',gap:16}}>
            <h1 style={{fontSize:17,fontWeight:700,display:'flex',alignItems:'center',gap:8}}><span style={{fontSize:22}}>ðŸŽµ</span>A&R Dashboard</h1>
            {sel&&<button onClick={()=>setSel(null)} style={{display:'flex',alignItems:'center',gap:5,padding:'7px 12px',borderRadius:8,border:'none',background:'var(--bg-3)',color:'var(--tx-2)',fontSize:12,fontWeight:500,cursor:'pointer'}}>{I.back}All Artists</button>}
          </div>
          <div style={{display:'flex',alignItems:'center',gap:10}}>
            {!sel&&<div style={{position:'relative'}}><span style={{position:'absolute',left:10,top:'50%',transform:'translateY(-50%)',color:'var(--tx-3)'}}>{I.search}</span><input type="text" placeholder="Search..." value={search} onChange={e=>setSearch(e.target.value)} style={{width:180,padding:'9px 10px 9px 36px',borderRadius:8,border:'1px solid var(--bd)',background:'var(--bg-3)',color:'var(--tx-1)',fontSize:13}}/></div>}
            <button onClick={()=>setShowAdd(true)} style={{display:'flex',alignItems:'center',gap:5,padding:'9px 14px',borderRadius:8,border:'none',background:'var(--acc)',color:'#fff',fontSize:12,fontWeight:600,cursor:'pointer'}}>{I.plus}Add Artist</button>
            <button onClick={toggle} style={{display:'flex',alignItems:'center',justifyContent:'center',width:38,height:38,borderRadius:8,border:'1px solid var(--bd)',background:'var(--bg-3)',color:'var(--tx-2)',cursor:'pointer'}} title={theme==='dark'?'Light mode':'Dark mode'}>{theme==='dark'?I.sun:I.moon}</button>
          </div>
        </div>
      </header>

      {/* Main */}
      <main style={{maxWidth:1400,margin:'0 auto',padding:20}}>
        {sel?<Detail artist={artists.find(a=>a.id===sel.id)} onSave={save} onDel={()=>del(sel.id)} onBack={()=>setSel(null)}/>:<Grid artists={sorted} onSelect={setSel} onStatClick={setStatsModal}/>}
      </main>

      {showAdd&&<AddModal onClose={()=>setShowAdd(false)} onAdd={add} count={artists.length}/>}
      {statsModal&&<StatsModal title={statsModal.title} artists={artists} type={statsModal.type} onClose={()=>setStatsModal(null)}/>}
    </div>
  );
}

// Artists Grid
function Grid({artists,onSelect,onStatClick}){
  const totals=useMemo(()=>{
    const ts=artists.reduce((s,a)=>s+totStr(a),0);
    const ml=artists.reduce((s,a)=>s+(a.m?.ml||0),0);
    const tu=artists.reduce((s,a)=>s+totUGC(a),0);
    const tkf=artists.reduce((s,a)=>s+(a.m?.tk||0),0);
    const igf=artists.reduce((s,a)=>s+(a.m?.ig||0),0);
    const ds=artists.reduce((s,a)=>s+dayStr(a),0);
    const ss=artists.length?(artists.reduce((s,a)=>s+(parseFloat(a.m?.ss)||0),0)/artists.length).toFixed(1):0;
    return{ts,ml,tu,tkf,igf,ds,ss};
  },[artists]);

  return(
    <div className="fi">
      {/* Stats - Clickable */}
      <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fit,minmax(160px,1fr))',gap:12,marginBottom:28}}>
        <Stat 
          label="Total Streams" 
          value={fmt(totals.ts)} 
          delta={totals.ds} 
          color="var(--grn)"
          tooltip="Spotify + Apple Music + YouTube streams (click for details)"
          onClick={()=>onStatClick({title:'Total Streams',type:'streams'})}
        />
        <Stat 
          label="Monthly Listeners" 
          value={fmt(totals.ml)} 
          icon={I.sp} 
          color="#1DB954"
          tooltip="Spotify monthly listeners (click for details)"
          onClick={()=>onStatClick({title:'Monthly Listeners',type:'monthly'})}
        />
        <Stat 
          label="TikTok Followers" 
          value={fmt(totals.tkf)} 
          icon={I.tk} 
          color="var(--tx-1)"
          tooltip="Total TikTok followers (click for details)"
          onClick={()=>onStatClick({title:'TikTok Followers',type:'tiktok'})}
        />
        <Stat 
          label="IG Followers" 
          value={fmt(totals.igf)} 
          icon={I.ig} 
          color="#E1306C"
          tooltip="Total Instagram followers (click for details)"
          onClick={()=>onStatClick({title:'Instagram Followers',type:'instagram'})}
        />
        <Stat 
          label="TikTok UGC" 
          value={fmt(totals.tu)} 
          icon={I.fire} 
          color="var(--prp)"
          tooltip="Videos using artist sounds (click for details)"
          onClick={()=>onStatClick({title:'TikTok UGC',type:'ugc'})}
        />
        <Stat 
          label="Social Score" 
          value={totals.ss} 
          color="var(--acc)"
          tooltip="Based on TikTok & IG posting (click for details)"
          onClick={()=>onStatClick({title:'Social Score',type:'social'})}
        />
      </div>

      {/* Header */}
      <div style={{display:'flex',alignItems:'center',justifyContent:'space-between',marginBottom:12}}>
        <h2 style={{fontSize:14,fontWeight:600,color:'var(--tx-2)'}}>All Artists ({artists.length})</h2>
        <span style={{fontSize:11,color:'var(--tx-3)'}}>Sorted by total streams</span>
      </div>

      {/* Table */}
      {artists.length===0?(
        <div style={{padding:50,textAlign:'center',background:'var(--bg-2)',borderRadius:14,border:'1px solid var(--bd)'}}>
          <div style={{fontSize:40,marginBottom:12}}>ðŸŽ¤</div>
          <h3 style={{fontSize:16,marginBottom:6}}>No artists yet</h3>
          <p style={{color:'var(--tx-3)',fontSize:13}}>Click "Add Artist" to start tracking</p>
        </div>
      ):(
        <div style={{background:'var(--bg-2)',borderRadius:14,border:'1px solid var(--bd)',overflow:'hidden'}}>
          {/* Table Header */}
          <div style={{display:'grid',gridTemplateColumns:'2fr 1fr 1fr 1fr 1fr 1fr 36px',gap:12,padding:'10px 16px',borderBottom:'1px solid var(--bd)',background:'var(--bg-3)',fontSize:10,fontWeight:600,color:'var(--tx-3)',textTransform:'uppercase',letterSpacing:'.5px'}}>
            <span>Artist</span>
            <span style={{textAlign:'right'}}>Streams</span>
            <span style={{textAlign:'right'}}>Daily</span>
            <span style={{textAlign:'right'}}>TikTok</span>
            <span style={{textAlign:'right'}}>Instagram</span>
            <span style={{textAlign:'right'}}>UGC</span>
            <span></span>
          </div>
          {/* Rows */}
          {artists.map((a,i)=><Row key={a.id} a={a} rank={i+1} onClick={()=>onSelect(a)}/>)}
        </div>
      )}
    </div>
  );
}

function Row({a,rank,onClick}){
  const ts=totStr(a),dv=dayStr(a),tu=totUGC(a);
  return(
    <div onClick={onClick} style={{display:'grid',gridTemplateColumns:'2fr 1fr 1fr 1fr 1fr 1fr 36px',gap:12,padding:'12px 16px',borderBottom:'1px solid var(--bd-l)',cursor:'pointer',transition:'background .12s'}} onMouseOver={e=>e.currentTarget.style.background='var(--bg-3)'} onMouseOut={e=>e.currentTarget.style.background='transparent'}>
      <div style={{display:'flex',alignItems:'center',gap:10}}>
        <span style={{display:'flex',alignItems:'center',justifyContent:'center',width:26,height:26,borderRadius:7,background:rank<=3?'var(--org-l)':'var(--bg-3)',color:rank<=3?'var(--org)':'var(--tx-3)',fontSize:11,fontWeight:700}}>{rank}</span>
        <div><div style={{fontWeight:600,fontSize:13}}>{a.n}</div><div style={{fontSize:10,color:'var(--tx-3)'}}>{a.sg?.length||0} songs</div></div>
      </div>
      <div className="mono" style={{textAlign:'right',fontWeight:600,fontSize:13,alignSelf:'center'}}>{fmt(ts)}</div>
      <div style={{textAlign:'right',alignSelf:'center'}}><Delta v={dv} sz="sm"/></div>
      <div className="mono" style={{textAlign:'right',fontSize:12,color:'var(--tx-2)',alignSelf:'center'}}>{fmt(a.m?.tk||0)}</div>
      <div className="mono" style={{textAlign:'right',fontSize:12,color:'var(--tx-2)',alignSelf:'center'}}>{fmt(a.m?.ig||0)}</div>
      <div style={{textAlign:'right',alignSelf:'center'}}>
        {tu>0?<span className="mono" style={{display:'inline-flex',alignItems:'center',gap:3,padding:'3px 7px',borderRadius:5,background:tu>=1000?'var(--red-l)':'var(--prp-l)',color:tu>=1000?'var(--red)':'var(--prp)',fontSize:11,fontWeight:600}}>{tu>=1000&&I.fire}{fmt(tu)}</span>:<span style={{color:'var(--tx-3)',fontSize:12}}>â€”</span>}
      </div>
      <div style={{display:'flex',alignItems:'center',justifyContent:'center',color:'var(--tx-3)'}}>{I.chev}</div>
    </div>
  );
}

// Artist Detail
function Detail({artist:a,onSave,onDel,onBack}){
  const[editSong,setEditSong]=useState(null);
  const[newTitle,setNewTitle]=useState('');
  const[newTkUrl,setNewTkUrl]=useState('');
  const[isYTUpload,setIsYTUpload]=useState(false);
  const[showAdd,setShowAdd]=useState(false);
  const[editLinks,setEditLinks]=useState(false);
  const[links,setLinks]=useState({});

  useEffect(()=>{if(a)setLinks(a.l||{})},[a]);

  if(!a)return null;

  const ts=totStr(a),tu=totUGC(a),dsv=dayStr(a),duv=dayUGC(a);

  const addSong=()=>{
    if(!newTitle.trim())return;
    const id='s'+Date.now();
    onSave({...a,sg:[...(a.sg||[]),{id,t:newTitle.trim(),tkUrl:newTkUrl.trim(),isYTUpload}],sm:{...a.sm,[id]:{st:0,ug:0,am:0,h:{st:[],ug:[],am:[]}}}});
    setNewTitle('');setNewTkUrl('');setIsYTUpload(false);setShowAdd(false);
  };

  const delSong=id=>{if(!confirm('Remove song?'))return;const{[id]:_,...rest}=a.sm||{};onSave({...a,sg:a.sg.filter(s=>s.id!==id),sm:rest})};

  const saveTkUrl=(id,url)=>{onSave({...a,sg:a.sg.map(s=>s.id===id?{...s,tkUrl:url}:s)});setEditSong(null)};

  const toggleYTUpload=(id)=>{onSave({...a,sg:a.sg.map(s=>s.id===id?{...s,isYTUpload:!s.isYTUpload}:s)})};

  const saveLinks=()=>{onSave({...a,l:links});setEditLinks(false)};

  return(
    <div className="fi">
      {/* Header */}
      <div style={{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:20,flexWrap:'wrap',gap:12}}>
        <div>
          <h1 style={{fontSize:28,fontWeight:800,marginBottom:10}}>{a.n}</h1>
          {!editLinks?(
            <div style={{display:'flex',gap:6,flexWrap:'wrap',alignItems:'center'}}>
              {Object.entries(a.l||{}).filter(([_,u])=>u).map(([p,u])=><PBadge key={p} p={p} url={u}/>)}
              <button onClick={()=>setEditLinks(true)} style={{display:'flex',alignItems:'center',gap:4,padding:'5px 9px',borderRadius:7,border:'1px dashed var(--bd)',background:'transparent',color:'var(--tx-3)',fontSize:11,cursor:'pointer'}}>{I.edit}Edit Links</button>
            </div>
          ):(
            <div style={{background:'var(--bg-3)',padding:12,borderRadius:10,marginTop:8}}>
              <div style={{display:'grid',gridTemplateColumns:'1fr 1fr',gap:8,marginBottom:10}}>
                {[['sp','Spotify'],['tk','TikTok'],['ig','Instagram'],['yt','YouTube'],['am','Apple Music']].map(([k,l])=>(
                  <div key={k}>
                    <label style={{fontSize:10,color:'var(--tx-3)',display:'block',marginBottom:3}}>{l}</label>
                    <input value={links[k]||''} onChange={e=>setLinks({...links,[k]:e.target.value})} placeholder={`${l} URL`} style={{width:'100%',padding:'7px 9px',borderRadius:6,border:'1px solid var(--bd)',background:'var(--bg-2)',color:'var(--tx-1)',fontSize:11}}/>
                  </div>
                ))}
              </div>
              <div style={{display:'flex',gap:8}}>
                <button onClick={saveLinks} style={{padding:'7px 14px',borderRadius:6,border:'none',background:'var(--grn)',color:'#fff',fontSize:11,fontWeight:600,cursor:'pointer'}}>Save Links</button>
                <button onClick={()=>{setLinks(a.l||{});setEditLinks(false)}} style={{padding:'7px 12px',borderRadius:6,border:'1px solid var(--bd)',background:'transparent',color:'var(--tx-3)',fontSize:11,cursor:'pointer'}}>Cancel</button>
              </div>
            </div>
          )}
        </div>
        <button onClick={onDel} style={{display:'flex',alignItems:'center',gap:5,padding:'8px 14px',borderRadius:8,border:'1px solid var(--red)',background:'var(--red-l)',color:'var(--red)',fontSize:12,fontWeight:500,cursor:'pointer'}}>{I.trash}Remove</button>
      </div>

      {/* Stats */}
      <div style={{display:'grid',gridTemplateColumns:'repeat(auto-fit,minmax(150px,1fr))',gap:10,marginBottom:24}}>
        <Stat label="Total Streams" value={fmt(ts)} delta={dsv} color="var(--grn)"/>
        <Stat label="Monthly" value={fmt(a.m?.ml||0)} icon={I.sp} color="#1DB954"/>
        <Stat label="TikTok" value={fmt(a.m?.tk||0)} spark={a.h?.tk?.slice(-14)} color="var(--tx-1)"/>
        <Stat label="Instagram" value={fmt(a.m?.ig||0)} spark={a.h?.ig?.slice(-14)} color="#E1306C"/>
        <Stat label="Total UGC" value={fmt(tu)} delta={duv} color="var(--prp)"/>
        <Stat label="Social Score" value={a.m?.ss||'â€”'} color="var(--acc)"/>
      </div>

      {/* Songs */}
      <div style={{background:'var(--bg-2)',borderRadius:14,border:'1px solid var(--bd)',overflow:'hidden'}}>
        <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'14px 16px',borderBottom:'1px solid var(--bd)'}}>
          <div><h2 style={{fontSize:14,fontWeight:600}}>Songs</h2><p style={{fontSize:11,color:'var(--tx-3)'}}>{a.sg?.length||0} tracks</p></div>
          <button onClick={()=>setShowAdd(true)} style={{display:'flex',alignItems:'center',gap:4,padding:'7px 12px',borderRadius:7,border:'none',background:'var(--acc)',color:'#fff',fontSize:12,fontWeight:500,cursor:'pointer'}}>{I.plus}Add</button>
        </div>

        {/* Add Song Form */}
        {showAdd&&(
          <div style={{padding:14,borderBottom:'1px solid var(--bd)',background:'var(--bg-3)'}}>
            <input type="text" placeholder="Song title" value={newTitle} onChange={e=>setNewTitle(e.target.value)} autoFocus style={{width:'100%',padding:'10px 12px',borderRadius:7,border:'1px solid var(--bd)',background:'var(--bg-2)',color:'var(--tx-1)',fontSize:13,marginBottom:8}}/>
            <div style={{display:'flex',gap:8,marginBottom:8}}>
              <input type="text" placeholder="TikTok Sound URL (optional)" value={newTkUrl} onChange={e=>setNewTkUrl(e.target.value)} style={{flex:1,padding:'9px 12px',borderRadius:7,border:'1px solid var(--bd)',background:'var(--bg-2)',color:'var(--tx-1)',fontSize:12}}/>
            </div>
            <div style={{display:'flex',alignItems:'center',gap:12,marginBottom:10}}>
              <label style={{display:'flex',alignItems:'center',gap:6,fontSize:11,color:'var(--tx-2)',cursor:'pointer'}}>
                <input type="checkbox" checked={isYTUpload} onChange={e=>setIsYTUpload(e.target.checked)} style={{width:14,height:14}}/>
                YouTube Upload (won't count as streams)
              </label>
            </div>
            <div style={{display:'flex',gap:8}}>
              <button onClick={addSong} style={{padding:'9px 16px',borderRadius:7,border:'none',background:'var(--grn)',color:'#fff',fontWeight:600,fontSize:12,cursor:'pointer'}}>Add Song</button>
              <button onClick={()=>{setShowAdd(false);setNewTitle('');setNewTkUrl('');setIsYTUpload(false)}} style={{padding:'9px 12px',borderRadius:7,border:'1px solid var(--bd)',background:'transparent',color:'var(--tx-3)',cursor:'pointer'}}>Cancel</button>
            </div>
          </div>
        )}

        {/* Songs List */}
        {(!a.sg||a.sg.length===0)?(
          <div style={{padding:36,textAlign:'center',color:'var(--tx-3)',fontSize:13}}>No songs yet. Songs auto-add when scraper runs.</div>
        ):(
          <div>
            <div style={{display:'grid',gridTemplateColumns:'2fr 1fr 1fr 1fr 1fr 50px',gap:10,padding:'8px 16px',background:'var(--bg-3)',fontSize:10,fontWeight:600,color:'var(--tx-3)',textTransform:'uppercase',letterSpacing:'.5px'}}>
              <span>Title</span>
              <span style={{textAlign:'right'}}>Streams</span>
              <span style={{textAlign:'right'}}>Daily</span>
              <span style={{textAlign:'right'}}>UGC</span>
              <span>TikTok Sound</span>
              <span></span>
            </div>
            {a.sg.map(s=>{
              const m=a.sm?.[s.id]||{};
              const sv=vel(m.h?.st,1);
              return(
                <div key={s.id} style={{padding:'10px 16px',borderTop:'1px solid var(--bd-l)'}}>
                  <div style={{display:'grid',gridTemplateColumns:'2fr 1fr 1fr 1fr 1fr 50px',gap:10,alignItems:'center'}}>
                    <div>
                      <div style={{fontWeight:500,fontSize:13,display:'flex',alignItems:'center',gap:6}}>
                        {s.t}
                        {s.isYTUpload&&<span style={{fontSize:9,padding:'2px 5px',borderRadius:4,background:'var(--org-l)',color:'var(--org)'}}>YT Upload</span>}
                      </div>
                    </div>
                    <div className="mono" style={{textAlign:'right',fontWeight:600,fontSize:13,color:s.isYTUpload?'var(--tx-3)':'var(--tx-1)'}}>{fmt(m.st||0)}</div>
                    <div style={{textAlign:'right'}}><Delta v={sv} sz="sm"/></div>
                    <div style={{textAlign:'right'}}>
                      {m.ug>0?<span className="mono" style={{display:'inline-flex',alignItems:'center',gap:3,padding:'2px 6px',borderRadius:5,background:m.ug>=1000?'var(--red-l)':'var(--prp-l)',color:m.ug>=1000?'var(--red)':'var(--prp)',fontSize:11,fontWeight:600}}>{m.ug>=1000&&I.fire}{fmt(m.ug)}</span>:<span style={{color:'var(--tx-3)'}}>â€”</span>}
                    </div>
                    <div>
                      {editSong===s.id?(
                        <div style={{display:'flex',gap:4}}>
                          <input type="text" defaultValue={s.tkUrl||''} placeholder="URL" style={{flex:1,padding:'5px 7px',borderRadius:5,border:'1px solid var(--bd)',background:'var(--bg-1)',color:'var(--tx-1)',fontSize:10,minWidth:0}} onKeyDown={e=>{if(e.key==='Enter')saveTkUrl(s.id,e.target.value);if(e.key==='Escape')setEditSong(null)}} autoFocus/>
                          <button onClick={e=>saveTkUrl(s.id,e.target.previousSibling.value)} style={{padding:'4px 7px',borderRadius:4,border:'none',background:'var(--grn)',color:'#fff',fontSize:10,cursor:'pointer'}}>âœ“</button>
                        </div>
                      ):(
                        <button onClick={()=>setEditSong(s.id)} style={{padding:'3px 7px',borderRadius:5,border:'1px solid var(--bd)',background:s.tkUrl?'var(--grn-l)':'transparent',color:s.tkUrl?'var(--grn)':'var(--tx-3)',fontSize:10,cursor:'pointer'}}>{s.tkUrl?'ðŸŽµ Linked':'+ Link'}</button>
                      )}
                    </div>
                    <div style={{textAlign:'center',display:'flex',gap:4'}}>
                      <button onClick={()=>toggleYTUpload(s.id)} title={s.isYTUpload?"Mark as stream":"Mark as YT Upload"} style={{padding:4,borderRadius:5,border:'none',background:'transparent',color:s.isYTUpload?'var(--org)':'var(--tx-3)',cursor:'pointer',fontSize:10}}>{I.yt}</button>
                      <button onClick={()=>delSong(s.id)} style={{padding:4,borderRadius:5,border:'none',background:'transparent',color:'var(--tx-3)',cursor:'pointer'}}>{I.trash}</button>
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        )}
      </div>
    </div>
  );
}

// Add Artist Modal
function AddModal({onClose,onAdd,count}){
  const[f,setF]=useState({n:'',sp:'',tk:'',ig:'',yt:'',am:''});

  const submit=()=>{
    if(!f.n.trim()){alert('Name required');return}
    onAdd({n:f.n.trim(),da:new Date().toISOString().split('T')[0],l:{sp:f.sp,tk:f.tk,ig:f.ig,yt:f.yt,am:f.am},m:{sf:0,ml:0,tk:0,ig:0,yt:0,tp:0,ip:0,ss:0}});
  };

  return(
    <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,.55)',backdropFilter:'blur(4px)',display:'flex',alignItems:'center',justifyContent:'center',padding:16,zIndex:1000}}>
      <div style={{width:'100%',maxWidth:440,background:'var(--bg-2)',borderRadius:14,border:'1px solid var(--bd)',overflow:'hidden'}}>
        <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',padding:'14px 18px',borderBottom:'1px solid var(--bd)'}}>
          <h2 style={{fontSize:16,fontWeight:600}}>Add Artist</h2>
          <button onClick={onClose} style={{padding:6,borderRadius:6,border:'none',background:'var(--bg-3)',color:'var(--tx-3)',cursor:'pointer'}}>{I.x}</button>
        </div>
        <div style={{padding:18,maxHeight:'60vh',overflow:'auto'}}>
          <p style={{fontSize:11,color:'var(--tx-3)',marginBottom:14}}>{count}/25 artists</p>
          <div style={{marginBottom:14}}>
            <label style={{display:'block',fontSize:11,fontWeight:500,color:'var(--tx-2)',marginBottom:5}}>Artist Name *</label>
            <input type="text" value={f.n} onChange={e=>setF({...f,n:e.target.value})} placeholder="Enter name" style={{width:'100%',padding:'11px 13px',borderRadius:8,border:'1px solid var(--bd)',background:'var(--bg-3)',color:'var(--tx-1)',fontSize:13}}/>
          </div>
          {[['sp','Spotify',I.sp,'open.spotify.com/artist/...'],['tk','TikTok',I.tk,'tiktok.com/@...'],['ig','Instagram',I.ig,'instagram.com/...'],['yt','YouTube',I.yt,'youtube.com/@...'],['am','Apple Music',I.am,'music.apple.com/artist/...']].map(([k,l,ic,ph])=>(
            <div key={k} style={{marginBottom:10}}>
              <label style={{display:'flex',alignItems:'center',gap:5,fontSize:11,fontWeight:500,color:'var(--tx-2)',marginBottom:5}}>{ic}{l}</label>
              <input type="text" value={f[k]} onChange={e=>setF({...f,[k]:e.target.value})} placeholder={`https://${ph}`} style={{width:'100%',padding:'9px 11px',borderRadius:7,border:'1px solid var(--bd)',background:'var(--bg-3)',color:'var(--tx-1)',fontSize:12}}/>
            </div>
          ))}
        </div>
        <div style={{display:'flex',gap:10,padding:'14px 18px',borderTop:'1px solid var(--bd)'}}>
          <button onClick={onClose} style={{flex:1,padding:'11px 14px',borderRadius:8,border:'1px solid var(--bd)',background:'transparent',color:'var(--tx-2)',fontSize:13,fontWeight:500,cursor:'pointer'}}>Cancel</button>
          <button onClick={submit} style={{flex:1,padding:'11px 14px',borderRadius:8,border:'none',background:'var(--acc)',color:'#fff',fontSize:13,fontWeight:600,cursor:'pointer'}}>Add Artist</button>
        </div>
      </div>
    </div>
  );
}

// Render
ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
